<template>
  <div class="all">
    <div class="box1 container">
      <div ref="ul" @mousedown="mousedown" @mouseup="mouseup" class="uls">
        <div class="box" ref="li">
          <img src="@/assets/img/teac-5.png" alt />
          <p class="p1">
            <span class="name">林晔智1</span>
            <span class="teac">&nbsp;&nbsp;&nbsp;高级专家</span>
          </p>
          <p
            class="detail"
          >温州乐清人，本科到研究生攻读数学、计算数学、计算机等专业，2013年博士毕业于华东师范大学。主要擅长于计算机算法、符号分析等，现为大学ACM教练，编程教育和竞赛培训经验丰富。</p>
        </div>
        <div class="box" ref="li">
          <img src="@/assets/img/teac-5.png" alt />
          <p class="p1">
            <span class="name">林晔智2</span>
            <span class="teac">&nbsp;&nbsp;&nbsp;高级专家</span>
          </p>
          <p
            class="detail"
          >温州乐清人，本科到研究生攻读数学、计算数学、计算机等专业，2013年博士毕业于华东师范大学。主要擅长于计算机算法、符号分析等，现为大学ACM教练，编程教育和竞赛培训经验丰富。</p>
        </div>
        <div class="box" ref="li">
          <img src="@/assets/img/teac-5.png" alt />
          <p class="p1">
            <span class="name">林晔智3</span>
            <span class="teac">&nbsp;&nbsp;&nbsp;高级专家</span>
          </p>
          <p
            class="detail"
          >温州乐清人，本科到研究生攻读数学、计算数学、计算机等专业，2013年博士毕业于华东师范大学。主要擅长于计算机算法、符号分析等，现为大学ACM教练，编程教育和竞赛培训经验丰富。</p>
        </div>
        <div class="box" ref="li">
          <img src="@/assets/img/teac-5.png" alt />
          <p class="p1">
            <span class="name">林晔智4</span>
            <span class="teac">&nbsp;&nbsp;&nbsp;高级专家</span>
          </p>
          <p
            class="detail"
          >温州乐清人，本科到研究生攻读数学、计算数学、计算机等专业，2013年博士毕业于华东师范大学。主要擅长于计算机算法、符号分析等，现为大学ACM教练，编程教育和竞赛培训经验丰富。</p>
        </div>
        <div class="box" ref="li">
          <img src="@/assets/img/teac-5.png" alt />
          <p class="p1">
            <span class="name">林晔智5</span>
            <span class="teac">&nbsp;&nbsp;&nbsp;高级专家</span>
          </p>
          <p
            class="detail"
          >温州乐清人，本科到研究生攻读数学、计算数学、计算机等专业，2013年博士毕业于华东师范大学。主要擅长于计算机算法、符号分析等，现为大学ACM教练，编程教育和竞赛培训经验丰富。</p>
        </div>
        <div class="box" ref="li">
          <img src="@/assets/img/teac-5.png" alt />
          <p class="p1">
            <span class="name">林晔智6</span>
            <span class="teac">&nbsp;&nbsp;&nbsp;高级专家</span>
          </p>
          <p
            class="detail"
          >温州乐清人，本科到研究生攻读数学、计算数学、计算机等专业，2013年博士毕业于华东师范大学。主要擅长于计算机算法、符号分析等，现为大学ACM教练，编程教育和竞赛培训经验丰富。</p>
        </div>
        <div class="box" ref="li">
          <img src="@/assets/img/teac-5.png" alt />
          <p class="p1">
            <span class="name">林晔智7</span>
            <span class="teac">&nbsp;&nbsp;&nbsp;高级专家</span>
          </p>
          <p
            class="detail"
          >温州乐清人，本科到研究生攻读数学、计算数学、计算机等专业，2013年博士毕业于华东师范大学。主要擅长于计算机算法、符号分析等，现为大学ACM教练，编程教育和竞赛培训经验丰富。</p>
        </div>
        <div class="box" ref="li">
          <img src="@/assets/img/teac-5.png" alt />
          <p class="p1">
            <span class="name">林晔智8</span>
            <span class="teac">&nbsp;&nbsp;&nbsp;高级专家</span>
          </p>
          <p
            class="detail"
          >温州乐清人，本科到研究生攻读数学、计算数学、计算机等专业，2013年博士毕业于华东师范大学。主要擅长于计算机算法、符号分析等，现为大学ACM教练，编程教育和竞赛培训经验丰富。</p>
        </div>
        <div class="box" ref="li">
          <img src="@/assets/img/teac-5.png" alt />
          <p class="p1">
            <span class="name">林晔智9</span>
            <span class="teac">&nbsp;&nbsp;&nbsp;高级专家</span>
          </p>
          <p
            class="detail"
          >温州乐清人，本科到研究生攻读数学、计算数学、计算机等专业，2013年博士毕业于华东师范大学。主要擅长于计算机算法、符号分析等，现为大学ACM教练，编程教育和竞赛培训经验丰富。</p>
        </div>
        <div class="box" ref="li">
          <img src="@/assets/img/teac-5.png" alt />
          <p class="p1">
            <span class="name">林晔智10</span>
            <span class="teac">&nbsp;&nbsp;&nbsp;高级专家</span>
          </p>
          <p
            class="detail"
          >温州乐清人，本科到研究生攻读数学、计算数学、计算机等专业，2013年博士毕业于华东师范大学。主要擅长于计算机算法、符号分析等，现为大学ACM教练，编程教育和竞赛培训经验丰富。</p>
        </div>
        <div class="box" ref="li">
          <img src="@/assets/img/teac-5.png" alt />
          <p class="p1">
            <span class="name">林晔智11</span>
            <span class="teac">&nbsp;&nbsp;&nbsp;高级专家</span>
          </p>
          <p
            class="detail"
          >温州乐清人，本科到研究生攻读数学、计算数学、计算机等专业，2013年博士毕业于华东师范大学。主要擅长于计算机算法、符号分析等，现为大学ACM教练，编程教育和竞赛培训经验丰富。</p>
        </div>
        <div class="box" ref="li">
          <img src="@/assets/img/teac-5.png" alt />
          <p class="p1">
            <span class="name">林晔智12</span>
            <span class="teac">&nbsp;&nbsp;&nbsp;高级专家</span>
          </p>
          <p
            class="detail"
          >温州乐清人，本科到研究生攻读数学、计算数学、计算机等专业，2013年博士毕业于华东师范大学。主要擅长于计算机算法、符号分析等，现为大学ACM教练，编程教育和竞赛培训经验丰富。</p>
        </div>
      </div>
    </div>
    <div class="right" @click="leftclick">
      <img src="@/assets/img/teacher-back.png" alt />
    </div>
    <div class="left" @click="rightclick">
      <img src="@/assets/img/teacher-back(1).png" alt />
    </div>
  </div>
</template>
<script>
export default {
  data() {
    return {
      margin: 0,
      wid: 0,
      child: null,
      threechild: [],
      lastthreechild: []
    };
  },
  methods: {
    mousedown(e) {
      var e = window.event || e;
      let x = e.clientX;
      let that = this;
      let width = this.margin;
      //console.log(width);

      document.onmousemove = function(e) {
        var e = window.event || e;
        //console.log(that.margin);
        let X = e.clientX;
        that.$refs.ul.style.marginLeft = X - x + parseInt(width) + "px";
        //console.log(X-x + width );
        //console.log(that.margin);
      };
    },
    mouseup() {
      document.onmousemove = null;
      this.margin = this.$refs.ul.style.marginLeft;
      //console.log(this.margin);
    },
    leftclick() {
      let that = this;
      this.animate(this.$refs.ul, { marginLeft: -1180 }, function() {
        //console.log(that.child);
        for (let j = 0; j < that.child.length; j++) {
          if (j == 0 || j == 1 || j == 2) {
            that.threechild.push(that.child[j]);
          }
        }
        for (let k = 0; k < that.threechild.length; k++) {
          that.$refs.ul.appendChild(that.threechild[k]);
        }
        that.$refs.ul.style.marginLeft = 0;
      });
    },
    rightclick() {
      let that = this;
      this.$refs.ul.style.marginLeft = -1180 + "px";
      for (let j = 0; j < this.child.length; j++) {
        if (j == 11 || j == 10 || j == 9) {
          this.lastthreechild.push(this.child[j]);
        }
        console.log(this.lastthreechild);
        for (let m = 0; m < this.lastthreechild.length; m++) {
          this.$refs.ul.insertBefore(this.lastthreechild[m], this.child[0]);
        }
      }
      this.animate(this.$refs.ul, { marginLeft: 0 },);
    },
    animate(dom, obj, fn) {
      clearInterval(dom.timer);
      let that = this;
      dom.timer = setInterval(function() {
        var bool = true;
        for (var k in obj) {
          if (k == "opacity") {
            var objAttr = parseFloat(that.getAttr(dom, k)) * 100;
          } else {
            var objAttr = parseInt(that.getAttr(dom, k));
          }

          var speed = (obj[k] - objAttr) / 10;

          speed = speed > 0 ? Math.ceil(speed) : Math.floor(speed);

          if (objAttr != obj[k]) {
            bool = false;
          }

          if (k == "opacity") {
            dom.style.filter = "alpha(opacity:" + objAttr + speed + ")";
            dom.style[k] = (objAttr + speed) / 100;
          } else {
            dom.style[k] = objAttr + speed + "px";
          }
        }
        if (bool) {
          clearInterval(dom.timer);
          if (fn) {
            fn.call(dom);
          }
        }
      }, 30);
    },
    getAttr(dom, attr) {
      if (dom.currentStyle) {
        return dom.currentStyle[attr];
      } else {
        return getComputedStyle(dom, null)[attr];
      }
    }
  },
  mounted() {
    //console.log(this.$refs.li.offsetWidth);
    //console.log(this.$refs.ul.childNodes.length);
    //console.log(this.$refs.li.offsetWidth*this.$refs.ul.childNodes.length);
    this.wid = this.$refs.li.offsetWidth;
    //console.log(this.wid);

    this.$refs.ul.style.width =
      this.wid * this.$refs.ul.childElementCount + "px";
      this.child = this.$refs.ul.children;
    //console.log(this.threechild);
  }
};
</script>
<style scoped>
.all {
  position: relative;
}
.box1 {
  height: 585px;
  overflow: hidden;
  position: relative;
  z-index: 10000;
}
.box {
  float: left;
  width: 360px;
  height: 470px;
  margin-left: 3px;
  margin-top: 80px;
  box-shadow: 0px 4px 14px 0px rgba(0, 0, 0, 0.14);
  margin-right: 30px;
  border-radius: 50px;
  text-align: center;
}
.box img {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  margin-top: 20px;
}
.p1 {
  font-size: 24px;
  line-height: 68px;
  color: #333;
}
.name {
  color: orange;
}
.teac {
  font-size: 18px;
  font-weight: bold;
}
.detail {
  font-size: 16px;
  line-height: 29px;
  color: #9b9b9b;
  text-align: justify;
  padding: 0 15px;
}
.uls {
  height: 100%;
}
.right {
  position: absolute;
  top: 50%;
  left: 150px;
}
.left {
  position: absolute;
  top: 50%;
  right: 140px;
}
.right img {
  width: 27px;
  height: 44px;
}
.left img {
  width: 27px;
  height: 44px;
}
</style>